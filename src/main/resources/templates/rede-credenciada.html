<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <!--<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap-theme.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/css/main.css}"/>

    <script type="text/javascript" th:src="@{/js/jquery-3.2.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.mask.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/odonto-Valida.js}"></script>
    <script type="text/javascript" th:src="@{/js/menu.js}"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/odontoprev.css" rel="stylesheet">
    <link href="css/sweetalert.css" rel="stylesheet" />

</head>

<body style="min-width: 100% !important;">

<div class="container-fluid nopadding">

    <div th:switch="${session.usuario.perfil}">
        <div th:case="'Corretor'">
            <div th:replace="fragments/menu-corretor :: menu-corretor">&nbsp;</div>
            <div th:replace="fragments/header-corretor :: header-corretor">&nbsp;</div>
        </div>
        <div th:case="'Corretora'">
            <div th:replace="fragments/menu-corretora :: menu-corretora">&nbsp;</div>
            <div th:replace="fragments/header-corretora :: header-corretora">&nbsp;</div>
        </div>
    </div>

    <div class="container-logado padding-logado">

        <!-- Bloco 1 -->

            <div class="row">
                <div class="col-md-12 odontBoxCenter">
                    <div class="text-center">
                        <div>
                            <h1 class="titleOdont text-center">
                                REDE CREDENCIADA
                            </h1>
                            <h2 class="subTitleOdont text-center">
                                Encontre um dentista para o seu cliente
                            </h2>
                        </div>
                    </div>

                    <div class="boxLabInput">

                        <!--<div>
                            <label class="label-cep labelOdontBlur">CEP</label>
                            <label class="col-md-6 text-right"><span class=""><h5 id="labelCep"></h5></span></label>
                        </div>
                        <div>
                            <input type="text" class=" cep inputLabelBlur" id="cep">
                        </div>-->
                        <!--<div>
                            <label class="label-bairro labelOdontBlur">BAIRRO</label>
                        </div>
                        <div>
                            <input type="text" class="bairro inputLabelBlur" id="bairro">
                        </div>-->
                        <!--<div>
                            <label class="label-cidade labelOdontBlur">CIDADE</label>
                        </div>
                        <div>
                            <input type="text" class="cidade inputLabelBlur" id="cidade">
                        </div>-->

                        <div class="form-group">
                            <label for="" class="label-especialidade labelOdontBlur">ESPECIALIDADES</label>
                            <select class="form-control especialidade selectListBlur" id="especs"></select>
                        </div>

                        <div class="form-group">
                            <label for="" class="label-estado labelOdontBlur">ESTADO</label>
                            <select class="form-control estado selectListBlur" id="estados"></select>
                        </div>

                        <div class="form-group">
                            <label for="" class="label-cidade labelOdontBlur">CIDADE</label>
                            <select class="form-control cidade selectListBlur" id="cidades"></select>
                        </div>

                        <div class="form-group">
                            <label for="" class="label-bairro labelOdontBlur">BAIRRO</label>
                            <select class="form-control bairro selectListBlur" id="bairros"></select>
                        </div>

                    </div>

                </div>
            </div>

            <div class="row">
                <div class="col-md-12 btnPadBtm">
                    <!--<a class="btn btn-lg btn-block btnOdont" id="" data-toggle="modal" data-target="#myModal" role="button">BUSCAR</a>-->
                    <button class="btn btn-lg btn-block btnOdont" id="btnBuscar">BUSCAR</button>
                </div>
            </div>

            <div id="map" class="nopadding">
                <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJVbswYP8yLVKCQGtTN3Xsifugqm8BBkQ&callback=mapa">
                </script>
            </div>

        </div>


        <!-- End Bloco 1 -->
        <button type="button" class="btnModal" data-backdrop="static" style="border:1px solid white; background-color: transparent;" id="btnModal" data-toggle="modal" data-target="#myModal" BotaoModal</button>
        <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog modalConteiner">
                <div class="imgBtnExcluir">
                    <img src="img/btn-excluir.png" class="btnExcluir" alt="">
                </div>
                <div class="modal-content">
                    <div class="modal-header-OdontMed">
                        <div class="">
                            <span class="labelBoldModal"><h2 id="nomeDentista"></h2></span>
                        </div>
                        <div>
                            <span class="labelLightModal">CRO:<h5 id="croDentista"></h5></span>
                            <label class="labelLightModal"><h5 id="tipoPessoaDentista"></h5></label>
                            <!--<span class="labelLightModal">Pessoa Física</span>-->
                        </div>
                    </div>
                </div>
                <div class="col-md-12 labelBoldModalPlano"><span></span></div>
                <div class="modal-body-OdontMed">
                    <div class="row">
                        <label class="labelBoldTitleModal">Especialidades</label>
                        <div class="text-center">
                            <label><img src="img/Protese.png" class="" alt=""><p><h5 id="especialidadeDentista1" style="color:gray"></h5></p></label>
                            <!--<label><img src="img/Ortodontia.png" class="" alt=""><p>_</p></label>-->
                            <!--<label><img src="img/Consulta.png" class="" alt=""><p>_</p></label>-->
                            <!--<label><img src="img/Cirurgia.png" class="" alt=""><p>_</p></label>-->
                        </div>
                    </div>
                </div>
                <div class="modal-footer-OdontMed">
                    <div>
                        <label class="labelBoldPink">Endereço</label>
                        <p class="labelBold"><h5 id="enderecoDentista" style="color:gray"></h5></p>
                        <p class="labelBold"><h5 id="cepDentista" style="color:gray"></h5></p>
                    </div>
                    <div>
                        <label class="labelBoldPink">Contato</label>
                        <p class="labelBold"><h5 id="telefoneDentista" style="color:gray"></h5></p>
                        <!--<p class="labelBold">contato@doutorajuliana.com.br</p>-->
                        <!--<p class="labelBold">www.doutorajuliana.com.br</p>-->
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal -->





        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script src="js/scripts.js"></script>
        <script src="js/odontoprev.js"></script>
        <script src="js/jquery.3.2.1.js"></script>
        <script src="js/jquery.mask.min.js"></script>
        <script src="js/odonto-Valida.js"></script>
        <script src="js/sweetalert.min.js"></script>
        <script src="app/coordenador.js"></script>
        <script src="app/redeCredenciadaController.js"></script>







    </div>

        <div th:replace="fragments/footer :: footer">&nbsp;</div>

</div>


<script type="text/javascript">



    //  function modal(){
    //var modal = document.getElementById('myModal');
    //modal.style.display = "block";
    //       $('#loginmodal').modal('show')
    // }

    //function especialidades() {
    //    callToken(function (dataToken) {
    //        callEspecialidades(function (dataEspecialidades) {
    //            //console.log(dataEspecialidades);
    //
    //            var sel = document.getElementById('especs');
    //
    //            for (var i = 0; i < dataEspecialidades.length; i++) {
    //
    //                var opt = document.createElement('option');
    //                //console.log(dataEspecialidades[i].descricao);
    //                opt.setAttribute('value', dataEspecialidades[i].codigo);
    //                //console.log(dataEspecialidades[i].codigo);
    //                opt.appendChild(document.createTextNode(dataEspecialidades[i].descricao));
    //                sel.appendChild(opt);
    //            }
    //
    //            var especialidade = 1;
    //            document.getElementById('especs').value = especialidade;
    //
    //        }, dataToken.access_token);
    //    });
    //}
    //
    //
    //
    //var t;

    //function callToken(callback) {
    //
    //    $.ajax({
    //        async: true,
    //        url: "https://api.odontoprev.com.br:8243/token/",
    //        method: "POST",
    //        headers: {
    //            "Authorization": "Basic Y3hHZXBoTzFkcERDd3U0VHlfRExWTWxXQ0R3YTp0WlJtSUN1eUJWajJZRVczRjdaNXdWM2E0YVlh",
    //            "Cache-Control": "no-cache",
    //            "Content-Type": "application/x-www-form-urlencoded"
    //        },
    //        data: {
    //            "grant_type": "client_credentials"
    //        },
    //        success: function (resp) {
    //            swal.close();
    //            callback(resp)
    //        },
    //        error: function (xhr) {
    //            swal("Ops!", "Erro na conexão, tente mais tarde", "error");
    //        }
    //    });
    //}

    //function callCep(callback, token, cep) {
    //
    //    swal({
    //        title: "Aguarde",
    //        text: 'Estamos procurando seus dados',
    //        content: "input",
    //        showCancelButton: false,
    //        showConfirmButton: false,
    //        icon: "info",
    //        button: {
    //            text: "...",
    //            closeModal: false,
    //        },
    //    })
    //
    //    $.ajax({
    //        async: true,
    //        url: "https://api.odontoprev.com.br:8243/cep/1.1/por/cep/" + cep,
    //        method: "GET",
    //        headers: {
    //            "Authorization": "Bearer " + token,
    //            "Cache-Control": "no-cache",
    //            "Content-Type": "application/json"
    //        },
    //        success: function (resp) {
    //            document.getElementById('labelCep').style.display = 'none';
    //            swal.close();
    //            callback(resp)
    //        },
    //
    //        error: function (xhr) {
    //            if (xhr.status == 500) {
    //                swal.close();
    //                console.log("CEP INVALIDO");
    //                document.getElementById('labelCep').style.display = 'block';
    //                document.getElementById('labelCep').innerHTML = "CEP não foi encontrado";
    //            }
    //        }
    //    });
    //}

    //function callEspecialidades(callback, token) {
    //
    //
    //    $.ajax({
    //        async: true,
    //        url: "https://api.odontoprev.com.br:8243/redecredenciada/1.0/especialidades",
    //        method: "GET",
    //        headers: {
    //            "Authorization": "Bearer " + token,
    //            "Cache-Control": "no-cache",
    //            "Content-Type": "application/json"
    //        },
    //        success: function (resp) {
    //            swal.close();
    //            callback(resp)
    //        },
    //    });
    //}
    //
    //function callCidade(callback, token, uf, codigoCidade) {
    //
    //    $.ajax({
    //        async: true,
    //        url: "https://api.odontoprev.com.br:8243/cep/1.1/cidades/uf?uf=" + uf + "&codigoCidade=" + codigoCidade,
    //        method: "GET",
    //        headers: {
    //            "Authorization": "Bearer " + token,
    //            "Cache-Control": "no-cache",
    //            "Content-Type": "application/json"
    //        },
    //        success: function (resp) {
    //            callback(resp)
    //        },
    //    });
    //}

    //function callBairro(callback, token, uf, codigoCidade, codigoBeneficiario) {
    //
    //    $.ajax({
    //        async: true,
    //        url: "https://api.odontoprev.com.br:8243/cep/1.1/bairros?uf=" + uf + "&codigoCidade=" + codigoCidade + "&codigoBeneficiario=" + codigoBeneficiario,
    //        method: "GET",
    //        headers: {
    //            "Content-Type": "application/json",
    //            "Authorization": "Bearer " + token,
    //            "Cache-Control": "no-cache",
    //            "Postman-Token": "c7575dd9-1908-dcf4-12eb-9091693dd541"
    //
    //        },
    //        success: function (resp) {
    //            callback(resp)
    //        },
    //        error: function (xhr) {
    //        }
    //    });
    //}




    function removerAcentos(newStringComAcento) {
        var string = newStringComAcento;
        var mapaAcentosHex = {
            a: /[\xE0-\xE6]/g,
            e: /[\xE8-\xEB]/g,
            i: /[\xEC-\xEF]/g,
            o: /[\xF2-\xF6]/g,
            u: /[\xF9-\xFC]/g,
            c: /\xE7/g,
            n: /\xF1/g
        };

        for (var letra in mapaAcentosHex) {
            var expressaoRegular = mapaAcentosHex[letra];
            string = string.replace(expressaoRegular, letra);
        }

        return string;
    }

    //function callTokenBack() {
    //
    //    ob.logString("Foi");
    //    callToken(function (dataToken) {
    //        ob.logString("Foi dnv");
    //    });
    //}


    //$(document).ready(function () {
    //    var t1;
    //
    //    $("#btnTeste").click(function (e) {
    //
    //        if ($("#cep").val() == "") {
    //            swal("Alerta", "Preencha o CEP", "warning");
    //
    //            $("#cep").css({ "border-color": "#F00" });
    //            $(".cep").css("color", "red");
    //            $(".label-cep").css("color", "red");
    //
    //            return;
    //        }
    //
    //        if ($("#bairro").val() == "") {
    //            swal("Alerta", "Preencha o Bairro", "warning");
    //            return;
    //        }
    //
    //        if ($("#cidade").val() == "") {
    //            swal("Alerta", "Preencha o Cidade", "warning");
    //            return;
    //        }
    //
    //
    //        var cep = $("#cep").val().replace(/\D/g, '');
    //
    //        callToken(function (dataToken) {
    //            t1 = dataToken;
    //
    //            callCep(function (dataCep) {
    //                var teste = removerAcentos(dataCep[0].cidade);
    //                teste = teste.toUpperCase();
    //
    //
    //                callCidade(function (dataCidade) {
    //                    var result = $.grep(dataCidade, function (e) { return e.nome == removerAcentos(dataCep[0].cidade).toUpperCase(); });
    //
    //                    var CodBeneficiario = "375796040";
    //
    //
    //                    callBairro(function (dataBairro) {
    //
    //
    //                        var codigoEspecialidade = $('#especs').val();
    //                        var privian = "FALSE";
    //                        var codigoMarca = "1";
    //
    //                        //var bairro = dataCep[0].bairro.toUpperCase();
    //
    //                        var codigoBairro = $.grep(dataBairro, function (e) {
    //                            if (dataCep[0].bairro != null) {
    //                                return e.nome == dataCep[0].bairro.toUpperCase()
    //                            } else {
    //                                return e.nome == dataCep[0].cidade.toUpperCase()
    //                            }
    //
    //                        });
    //
    //                        if (codigoBairro == null) {
    //                            codigoBairro = "";
    //                        }
    //
    //                        //console.log(codigoBairro);
    //                        //console.log(result[0].codigoMicroregiao);
    //
    //
    //                        if (codigoBairro.length == 0) {
    //                            callRedeCredenciada(function (dataRedeCredenciada) {
    //                                //console.log(dataRedeCredenciada);
    //                                initMap(dataRedeCredenciada);
    //
    //                            }, dataToken.access_token, CodBeneficiario, dataCep[0].estado, codigoEspecialidade, result[0].codigoMicroregiao, privian, codigoMarca, "0");
    //
    //                        }
    //                        else if (codigoBairro != null) {
    //                            callRedeCredenciada(function (dataRedeCredenciada) {
    //                                initMap(dataRedeCredenciada);
    //                            }, dataToken.access_token, CodBeneficiario, dataCep[0].estado, codigoEspecialidade, result[0].codigoMicroregiao, privian, codigoMarca, codigoBairro[0].codigo);
    //                        }
    //
    //                    }, dataToken.access_token, dataCep[0].estado, result[0].codigoCidade, CodBeneficiario);
    //
    //                }, dataToken.access_token, dataCep[0].estado, dataCep[0].idCidade);
    //
    //            }, dataToken.access_token, cep);
    //
    //        });
    //    });
    //});


    //$(document).ready(function () {
    //
    //    function limpa_formulário_cep() {
    //        // Limpa valores do formulário de cep.
    //        $("#bairro").val("");
    //        $("#cidade").val("");
    //    }
    //
    //    var typingTimer; //timer identifier
    //    var doneTypingInterval = 500; //time in ms, 5 second for example
    //
    //    //on keyup, start the countdown
    //    $('#cepRedeCredenciada').keyup(function () {
    //        clearTimeout(typingTimer);
    //        if ($('#cepRedeCredenciada').val) {
    //            typingTimer = setTimeout(doneTyping, doneTypingInterval);
    //        }
    //    });
    //
    //    function doneTyping() {
    //        validar();
    //    }
    //
    //    function validar() {
    //        //Nova variável "cep" somente com dígitos.
    //        var cep = $('#cepRedeCredencida').val().replace(/\D/g, '');
    //
    //        //Verifica se campo cep possui valor informado.
    //        if (cep != "" && cep.length == 8) {
    //
    //            //Expressão regular para validar o CEP.
    //            var validacep = /^[0-9]{8}$/;
    //
    //            //Valida o formato do CEP.
    //            if (validacep.test(cep)) {
    //
    //                //Preenche os campos com "..." enquanto consulta webservice.
    //                $("#bairro").val("");
    //                $("#cidade").val("");
    //
    //                $("#cepRedeCredenciada").val("00000-000");
    //                callToken(function (dataToken) {
    //                    callCep(function (dataCep) {
    //                        $("#cepRedeCredenciada").val("00000-000");
    //                        $("#bairroRedeCredenciada").val(dataCep[0].bairro);
    //                        $("#cidadeRedeCredenciada").val(dataCep[0].cidade);
    //
    //                    }, dataToken.access_token, cep);
    //                });
    //
    //                //    //Consulta o webservice viacep.com.br/
    //                //    $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados)
    //                //    {
    //                //        if (!("erro" in dados)) {
    //                //        //Atualiza os campos com os valores da consulta.
    //                //            $("#rua").val(dados.logradouro);
    //                //            $("#bairro").val(dados.bairro);
    //                //            $("#cidade").val(dados.localidade);
    //                //            $("#uf").val(dados.uf);
    //                //        } //end if.
    //                //        else {
    //                //            //CEP pesquisado não foi encontrado.
    //                //            limpa_formulário_cep();
    //                //            alert("CEP não encontrado.");
    //                //        }
    //                //    });
    //
    //
    //
    //
    //            } //end if.
    //            else {
    //                //cep é inválido.
    //                limpa_formulário_cep();
    //                alert("Formato de CEP inválido.");
    //            }
    //        } //end if.
    //        else {
    //            //cep sem valor, limpa formulário.
    //            limpa_formulário_cep();
    //        }
    //    }
    //
    //    //Quando o campo cep perde o foco.
    //
    //});

</script>
</body>

</html>